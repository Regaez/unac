// Datastar v1.0.0
// This bundle was licensed to Github user 'Regaez'
// cc370124c13a3e396fe779142fbe5fe4
var ze=/ðŸ–•JS_DSðŸš€/.source,fe=ze.slice(0,5),Oe=ze.slice(4),S="datastar",Qe="Datastar-Request",Ze=1e3;var de="outer",Ye="inner",Xe="remove",De="replace",et="prepend",tt="append",nt="before",st="after",it=de,ee="datastar-patch-elements",rt="datastar-patch-signals";Object.hasOwn||(Object.hasOwn=(e,t)=>Object.prototype.hasOwnProperty.call(Object(e),t));function pe(e){return e instanceof HTMLElement||e instanceof SVGElement}var te=e=>e!==null&&typeof e=="object"&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null);var ge=e=>{let t={};for(let[n,s]of e){let i=n.split("."),a=i.pop(),r=i.reduce((o,c)=>o[c]??={},t);r[a]=s}return t};var T=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),j=e=>T(e).replace(/-./g,t=>t[1].toUpperCase()),ne=e=>T(e).replace(/-/g,"_"),Zt=e=>j(e).replace(/(^.|(?<=\.).)/g,t=>t[0].toUpperCase());var Yt={kebab:T,snake:ne,pascal:Zt};function me(e,t){for(let n of t.get("case")||[]){let s=Yt[n];s&&(e=s(e))}return e}var Xt="https://data-star.dev/errors";function ot(e,t,n={}){let s=new Error;s.name=`${S} ${e} error`;let i=ne(t),a=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),r=JSON.stringify(n,null,2);return s.message=`${t}
More info: ${Xt}/${e}/${i}?${a}
Context: ${r}`,s}function Le(e,t,n={}){let s={plugin:{name:e.plugin.name,type:e.plugin.type}};return ot("init",t,Object.assign(s,n))}function at(e,t,n={}){let s={plugin:{name:e.plugin.name,type:e.plugin.type},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,fnContent:e.fnContent}};return ot("runtime",t,Object.assign(s,n))}var ye=`${S}-signal-patch`;var ve=[],ke=[],xe=0,he=0,$e=0,L,re=()=>{xe++},oe=()=>{--xe||(mt(),M())},q=e=>tn.bind(0,{previousValue:e,value_:e,flags_:1}),He=Symbol("computed"),dt=e=>{let t=en.bind(0,{flags_:17,getter:e});return t[He]=1,t},pt=e=>{let t={fn_:e,flags_:2};L&&Ie(t,L);let n=P(t);re();try{t.fn_()}finally{oe(),P(n)}return bt.bind(0,t)},gt=e=>{let t=P(void 0);try{return e()}finally{P(t)}},mt=()=>{for(;he<$e;){let e=ke[he];ke[he++]=void 0,ht(e,e.flags_&=-65)}he=0,$e=0},ct=e=>"getter"in e?yt(e):vt(e,e.value_),P=e=>{let t=L;return L=e,t},yt=e=>{let t=P(e);Et(e);try{let n=e.value_;return n!==(e.value_=e.getter(n))}finally{P(t),Tt(e)}},vt=(e,t)=>(e.flags_=1,e.previousValue!==(e.previousValue=t)),Ne=e=>{let t=e.flags_;if(!(t&64)){e.flags_=t|64;let n=e.subs_;n?Ne(n.sub_):ke[$e++]=e}},ht=(e,t)=>{if(t&16||t&32&&Rt(e.deps_,e)){let s=P(e);Et(e),re();try{e.fn_()}finally{oe(),P(s),Tt(e)}return}t&32&&(e.flags_=t&-33);let n=e.deps_;for(;n;){let s=n.dep_,i=s.flags_;i&64&&ht(s,s.flags_=i&-65),n=n.nextDep_}},en=e=>{let t=e.flags_;if(t&16||t&32&&Rt(e.deps_,e)){if(yt(e)){let n=e.subs_;n&&Re(n)}}else t&32&&(e.flags_=t&-33);return L&&Ie(e,L),e.value_},tn=(e,...t)=>{if(t.length){let s=t[0];if(e.value_!==(e.value_=s)){e.flags_=17;let i=e.subs_;return i&&(nn(i),xe||mt()),!0}return!1}let n=e.value_;if(e.flags_&16&&vt(e,n)){let s=e.subs_;s&&Re(s)}return L&&Ie(e,L),n},bt=e=>{let t=e.deps_;for(;t;)t=Te(t,e);let n=e.subs_;n&&Te(n),e.flags_=0},Ie=(e,t)=>{let n=t.depsTail_;if(n&&n.dep_===e)return;let s,i=t.flags_&4;if(i&&(s=n?n.nextDep_:t.deps_,s&&s.dep_===e)){t.depsTail_=s;return}let a=e.subsTail_;if(a&&a.sub_===t&&(!i||St(a,t)))return;let r=t.depsTail_=e.subsTail_={dep_:e,sub_:t,prevDep_:n,nextDep_:s,prevSub_:a};s&&(s.prevDep_=r),n?n.nextDep_=r:t.deps_=r,a?a.nextSub_=r:e.subs_=r},Te=(e,t=e.sub_)=>{let n=e.dep_,s=e.prevDep_,i=e.nextDep_,a=e.nextSub_,r=e.prevSub_;if(i?i.prevDep_=s:t.depsTail_=s,s?s.nextDep_=i:t.deps_=i,a?a.prevSub_=r:n.subsTail_=r,r)r.nextSub_=a;else if(!(n.subs_=a))if("getter"in n){let o=n.deps_;if(o){n.flags_=17;do o=Te(o,n);while(o)}}else"previousValue"in n||bt(n);return i},nn=e=>{let t=e.nextSub_,n;e:for(;;){let s=e.sub_,i=s.flags_;if(i&3&&(i&60?i&12?i&4?!(i&48)&&St(e,s)?(s.flags_=i|40,i&=1):i=0:s.flags_=i&-9|32:i=0:s.flags_=i|32,i&2&&Ne(s),i&1)){let a=s.subs_;if(a){e=a,a.nextSub_&&(n={value_:t,prev_:n},t=e.nextSub_);continue}}if(e=t){t=e.nextSub_;continue}for(;n;)if(e=n.value_,n=n.prev_,e){t=e.nextSub_;continue e}break}},Et=e=>{e.depsTail_=void 0,e.flags_=e.flags_&-57|4},Tt=e=>{let t=e.depsTail_,n=t?t.nextDep_:e.deps_;for(;n;)n=Te(n,e);e.flags_&=-5},Rt=(e,t)=>{let n,s=0;e:for(;;){let i=e.dep_,a=i.flags_,r=!1;if(t.flags_&16)r=!0;else if((a&17)===17){if(ct(i)){let o=i.subs_;o.nextSub_&&Re(o),r=!0}}else if((a&33)===33){(e.nextSub_||e.prevSub_)&&(n={value_:e,prev_:n}),e=i.deps_,t=i,++s;continue}if(!r&&e.nextDep_){e=e.nextDep_;continue}for(;s;){--s;let o=t.subs_,c=o.nextSub_;if(c?(e=n.value_,n=n.prev_):e=o,r){if(ct(t)){c&&Re(o),t=e.sub_;continue}}else t.flags_&=-33;if(t=e.sub_,e.nextDep_){e=e.nextDep_;continue e}r=!1}return r}},Re=e=>{do{let t=e.sub_,n=e.nextSub_,s=t.flags_;(s&48)===32&&(t.flags_=s|16,s&2&&Ne(t)),e=n}while(e)},St=(e,t)=>{let n=t.depsTail_;if(n){let s=t.deps_;do{if(s===e)return!0;if(s===n)break;s=s.nextDep_}while(s)}return!1},Ve=e=>{let t=H,n=e.split(".");for(let s of n){if(t==null||!Object.hasOwn(t,s))return;t=t[s]}return t},lt=Symbol("delete"),be=(e,t="")=>{let n=Array.isArray(e);if(n||te(e)){let s=n?[]:{};for(let a in e)s[a]=q(be(e[a],`${t+a}.`));let i=q(0);return new Proxy(s,{get(a,r){if(!(r==="toJSON"&&!Object.hasOwn(s,r)))return n&&r in Array.prototype?(i(),s[r]):typeof r=="symbol"?s[r]:((!Object.hasOwn(s,r)||s[r]()==null)&&(s[r]=q(""),M(t+r,""),i(i()+1)),s[r]())},set(a,r,o){let c=t+r;if(o===lt)Object.hasOwn(s,r)&&(delete s[r],M(c,lt),i(i()+1));else if(n&&r==="length"){let l=s[r]-o;if(s[r]=o,l>0){let u={};for(let f=o;f<s[r];f++)u[f]=null;M(t.slice(0,-1),u),i(i()+1)}}else Object.hasOwn(s,r)?o==null?s[r](null)&&M(c,null):Object.hasOwn(o,He)?(s[r]=o,M(c,"")):s[r](be(o,`${c}.`))&&M(c,o):o!=null&&(Object.hasOwn(o,He)?(s[r]=o,M(c,"")):(s[r]=q(be(o,`${c}.`)),M(c,o)),i(i()+1));return!0},deleteProperty(a,r){return Object.hasOwn(s,r)&&s[r](null)&&M(t+r,null),!0},ownKeys(){return i(),Reflect.ownKeys(s)},has(a,r){return i(),r in s}})}return e},M=(e,t)=>{if(e!==void 0&&t!==void 0&&ve.push([e,t]),!xe&&ve.length){let n=ge(ve);ve.length=0,document.dispatchEvent(new CustomEvent(ye,{detail:n}))}},je=(e,{ifMissing:t}={})=>{re();for(let n in e)e[n]==null?t||delete H[n]:At(e[n],n,H,"",t);oe()},xt=(e,t={})=>je(ge(e),t),At=(e,t,n,s,i)=>{if(te(e)){Object.hasOwn(n,t)&&(te(n[t])||Array.isArray(n[t]))||(n[t]={});for(let a in e)e[a]==null?i||delete n[t][a]:At(e[a],a,n[t],`${s+t}.`,i)}else i&&Object.hasOwn(n,t)||(n[t]=e)};function _t({include:e=/.*/,exclude:t=/(?!)/}={},n=H){let s=[],i=[[n,""]];for(;i.length;){let[a,r]=i.pop();for(let o in a){let c=r+o;te(a[o])?i.push([a[o],`${c}.`]):ut(e).test(c)&&!ut(t).test(c)&&s.push([c,Ve(c)])}}return ge(s)}function ut(e){return typeof e=="string"?RegExp(e.replace(/^\/|\/$/g,"")):e}var H=be({}),se={},Ee=[],Mt=[],ie=new Map,Pe=null,G="";function wt(e){G=e}function W(e){return G?`data-${G}-${e}`:`data-${e}`}function qe(...e){for(let t of e){let n={plugin:t,actions:se,root:H,filtered:_t,signal:q,computed:dt,effect:pt,mergePatch:je,mergePaths:xt,peek:gt,getPath:Ve,startBatch:re,endBatch:oe,initErr:0};if(n.initErr=Le.bind(0,n),t.type==="action")se[t.name]=t;else if(t.type==="attribute")Ee.push(t),t.onGlobalInit?.(n);else if(t.type==="watcher")t.onGlobalInit?.(n);else throw n.initErr("InvalidPluginType")}Ee.sort((t,n)=>{let s=n.name.length-t.name.length;return s!==0?s:t.name.localeCompare(n.name)}),Mt=Ee.map(t=>RegExp(`^${t.name}([A-Z]|_|$)`))}function Se(e){let t=`[${W("ignore")}]`;for(let n of e)if(!n.closest(t))for(let s in n.dataset)Ct(n,s,n.dataset[s])}function ft(e){for(let t of e){let n=ie.get(t);if(ie.delete(t)){for(let s of n.values())s();n.clear()}}}function Ge(e=document.body){queueMicrotask(()=>{Se([e]),Se(e.querySelectorAll("*")),Pe||(Pe=new MutationObserver(sn),Pe.observe(e,{subtree:!0,childList:!0,attributes:!0}))})}function Ct(e,t,n){if(t.startsWith(G)){let s=j(G?t.slice(G.length):t),i=Ee.find((a,r)=>Mt[r].test(s));if(i){let[a,...r]=s.slice(i.name.length).split(/__+/),o=!!a;o&&(a=j(a));let c=!!n,l={plugin:i,actions:se,root:H,filtered:_t,signal:q,computed:dt,effect:pt,mergePatch:je,mergePaths:xt,peek:gt,getPath:Ve,startBatch:re,endBatch:oe,initErr:0,el:e,rawKey:s,key:a,value:n,mods:new Map,runtimeErr:0,rx:0};l.initErr=Le.bind(0,l),l.runtimeErr=at.bind(0,l),(i.shouldEvaluate===void 0||i.shouldEvaluate===!0)&&(l.rx=rn(l));let u=i.keyReq||"allowed";if(o){if(u==="denied")throw l.runtimeErr(`${i.name}KeyNotAllowed`)}else if(u==="must")throw l.runtimeErr(`${i.name}KeyRequired`);let f=i.valReq||"allowed";if(c){if(f==="denied")throw l.runtimeErr(`${i.name}ValueNotAllowed`)}else if(f==="must")throw l.runtimeErr(`${i.name}ValueRequired`);if(u==="exclusive"||f==="exclusive"){if(o&&c)throw l.runtimeErr(`${i.name}KeyAndValueProvided`);if(!o&&!c)throw l.runtimeErr(`${i.name}KeyOrValueRequired`)}for(let p of r){let[y,...h]=p.split(".");l.mods.set(j(y),new Set(h.map(E=>E.toLowerCase())))}let d=i.onLoad(l);if(d){let p=ie.get(e);p?p.get(s)?.():(p=new Map,ie.set(e,p)),p.set(s,d)}}}}function sn(e){let t=`[${W("ignore")}]`;for(let{target:n,type:s,attributeName:i,addedNodes:a,removedNodes:r}of e)if(s==="childList"){for(let o of r)pe(o)&&(ft([o]),ft(o.querySelectorAll("*")));for(let o of a)pe(o)&&(Se([o]),Se(o.querySelectorAll("*")))}else if(s==="attributes"&&pe(n)&&!n.closest(t)){let o=j(i.slice(5)),c=n.getAttribute(i);if(c===null){let l=ie.get(n);l&&(l.get(o)?.(),l.delete(o))}else Ct(n,o,c)}}function rn(e){let t="",n=e.plugin||void 0;if(n?.returnsValue){let d=/(\/(\\\/|[^/])*\/|"(\\"|[^"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;){]*)\s*\)\s*\(\s*\)|[^;])+/gm,p=e.value.trim().match(d);if(p){let y=p.length-1,h=p[y].trim();h.startsWith("return")||(p[y]=`return (${h});`),t=p.join(`;
`)}}else t=e.value.trim();t=t.replace(/\$\['([a-zA-Z_$\d][\w$]*)'\]/g,"$$$1").replace(/\$([a-zA-Z_\d]\w*(?:[.-]\w+)*)/g,(d,p)=>p.split(".").reduce((h,E)=>`${h}['${E}']`,"$")).replace(/\[(\$[a-zA-Z_\d]\w*)\]/g,(d,p)=>`[$['${p.slice(1)}']]`);let s=new Map,i=RegExp(`(?:${fe})(.*?)(?:${Oe})`,"gm"),a=0;for(let d of t.matchAll(i)){let p=d[1],y=`dsEscaped${a++}`;s.set(y,p),t=t.replace(fe+p+Oe,y)}let r=(d,p)=>`${d}${ne(p).replaceAll(/\./g,"_")}`,o=new Set,c=RegExp(`@(${Object.keys(se).join("|")})\\(`,"gm"),l=[...t.matchAll(c)],u=new Set,f=new Set;if(l.length){let d=`${S}Act_`;for(let p of l){let y=p[1],h=se[y];if(!h)continue;o.add(y);let E=r(d,y);t=t.replace(`@${y}(`,`${E}(`),u.add(E),f.add((...w)=>h.fn(e,...w))}}for(let[d,p]of s)t=t.replace(d,p);e.fnContent=t;try{let d=Function("el","$",...n?.argNames||[],...u,t);return(...p)=>{try{return d(e.el,H,...p,...f)}catch(y){throw e.runtimeErr("ExecuteExpression",{error:y.message})}}}catch(d){throw e.runtimeErr("GenerateExpression",{error:d.message})}}var Ft={type:"attribute",name:"attr",valReq:"must",returnsValue:!0,onLoad:({el:e,effect:t,key:n,rx:s})=>{let i=(c,l)=>{l===""||l===!0?e.setAttribute(c,""):l===!1||l==null?e.removeAttribute(c):typeof l=="string"?e.setAttribute(c,l):e.setAttribute(c,JSON.stringify(l))};n=T(n);let a=n?()=>{r.disconnect();let c=s();i(n,c),r.observe(e,{attributeFilter:[n]})}:()=>{r.disconnect();let c=s(),l=Object.keys(c);for(let u of l)i(u,c[u]);r.observe(e,{attributeFilter:l})},r=new MutationObserver(a),o=t(a);return()=>{r.disconnect(),o()}}};var k=`${S}-fetch`,Ae="started",_e="finished",Ot="error",Dt="retrying",Lt="retries-failed";function Pt(e,t){document.addEventListener(k,n=>{if(n.detail.type===e){let{argsRaw:s}=n.detail;t(s)}})}var kt={type:"attribute",name:"indicator",keyReq:"exclusive",valReq:"exclusive",shouldEvaluate:!1,onLoad:({el:e,key:t,mods:n,mergePaths:s,value:i})=>{let a=t?me(t,n):i;s([[a,!1]]);let r=o=>{let{type:c,el:l}=o.detail;if(l===e)switch(c){case Ae:s([[a,!0]]);break;case _e:s([[a,!1]]);break}};return document.addEventListener(k,r),()=>{s([[a,!1]]),document.removeEventListener(k,r)}}};function K(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return+t.replace("ms","");if(t.endsWith("s"))return+t.replace("s","")*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function ae(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function We(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function on(e,t,n=!1,s=!0){let i=0;return(...a)=>{i&&clearTimeout(i),n&&!i&&e(...a),i=setTimeout(()=>{s&&e(...a),i&&clearTimeout(i)},t)}}function an(e,t,n=!0,s=!1){let i=!1;return(...a)=>{i||(n&&e(...a),i=!0,setTimeout(()=>{i=!1,s&&e(...a)},t))}}function $t(e,t){let n=t.get("delay");if(n){let a=K(n);e=We(e,a)}let s=t.get("debounce");if(s){let a=K(s),r=ae(s,"leading",!1),o=!ae(s,"notrail",!1);e=on(e,a,r,o)}let i=t.get("throttle");if(i){let a=K(i),r=!ae(i,"noleading",!1),o=ae(i,"trail",!1);e=an(e,a,r,o)}return e}var Ke=!!document.startViewTransition;function Me(e,t){if(t.has("viewtransition")&&Ke){let n=e;e=(...s)=>document.startViewTransition(()=>n(...s))}return e}var Ht={type:"attribute",name:"on",keyReq:"must",valReq:"must",argNames:["evt"],onLoad:e=>{let{el:t,key:n,mods:s,rx:i,startBatch:a,endBatch:r}=e,o=t;s.has("window")&&(o=window);let c=f=>{f&&(s.has("prevent")&&f.preventDefault(),s.has("stop")&&f.stopPropagation(),e.evt=f),a(),i(f),r()};c=$t(c,s),c=Me(c,s);let l={capture:s.has("capture"),passive:s.has("passive"),once:s.has("once")};if(s.has("outside")){o=document;let f=c;c=d=>{t.contains(d?.target)||f(d)}}let u=T(n);if(u=me(u,s),(u===k||u===ye)&&(o=document),t instanceof HTMLFormElement&&u==="submit"){let f=c;c=d=>{d?.preventDefault(),f(d)}}return o.addEventListener(u,c,l),()=>{o.removeEventListener(u,c)}}};var Nt={type:"attribute",name:"onLoad",keyReq:"denied",valReq:"must",onLoad:({rx:e,mods:t,startBatch:n,endBatch:s})=>{let i=()=>{n(),e(),s()};i=Me(i,t);let a=0,r=t.get("delay");r&&(a=K(r),a>0&&(i=We(i,a))),i()}};var we=new WeakMap,Ce=(e,t)=>({type:"action",name:e,fn:async(n,s,i)=>{let{el:a}=n,r=i?.requestCancellation??"auto",o=r instanceof AbortController?r:new AbortController,c=r==="disabled";c||we.get(a)?.abort(),!c&&!(r instanceof AbortController)&&we.set(a,o);try{await cn(n,t,s,i,o.signal)}finally{we.get(a)===o&&we.delete(a)}}}),N=(e,t,n)=>document.dispatchEvent(new CustomEvent(k,{detail:{type:e,el:t,argsRaw:n}})),It=e=>`${e}`.includes("text/event-stream"),cn=async({el:e,evt:t,filtered:n,runtimeErr:s},i,a,{selector:r,headers:o,contentType:c="json",filterSignals:{include:l=/.*/,exclude:u=/(^|\.)_/}={},openWhenHidden:f=!1,retryInterval:d=Ze,retryScaler:p=2,retryMaxWaitMs:y=3e4,retryMaxCount:h=10}={},E)=>{let w=i.toLowerCase(),$=()=>{};try{if(!a?.length)throw s("FetchNoUrlProvided",{action:w});let C={Accept:"text/event-stream, text/html, application/json",[Qe]:!0};c==="json"&&(C["Content-Type"]="application/json");let z=Object.assign({},C,o),F={method:i,headers:z,openWhenHidden:f,retryInterval:d,retryScaler:p,retryMaxWaitMs:y,retryMaxCount:h,signal:E,onopen:async g=>{g.status>=400&&N(Ot,e,{status:g.status.toString()})},onmessage:g=>{if(!g.event.startsWith(S))return;let O=g.event,A={};for(let v of g.data.split(`
`)){let m=v.indexOf(" "),_=v.slice(0,m),b=v.slice(m+1);(A[_]||=[]).push(b)}let D=Object.fromEntries(Object.entries(A).map(([v,m])=>[v,m.join(`
`)]));N(O,e,D)},onerror:g=>{if(It(g))throw s("InvalidContentType",{url:a});g&&(console.error(g.message),N(Dt,e,{message:g.message}))}},x=new URL(a,document.baseURI),Q=new URLSearchParams(x.search);if(c==="json"){let g=JSON.stringify(n({include:l,exclude:u}));i==="GET"?Q.set(S,g):F.body=g}else if(c==="form"){let g=r?document.querySelector(r):e.closest("form");if(!g)throw s(r?"FetchFormNotFound":"FetchClosestFormNotFound",{action:w,selector:r});if(!g.checkValidity()){g.reportValidity(),$();return}let O=new FormData(g),A=e;if(e===g&&t instanceof SubmitEvent)A=t.submitter;else{let m=_=>_.preventDefault();g.addEventListener("submit",m),$=()=>g.removeEventListener("submit",m)}if(A instanceof HTMLButtonElement){let m=A.getAttribute("name");m&&O.append(m,A.value)}let D=g.getAttribute("enctype")==="multipart/form-data";D||(z["Content-Type"]="application/x-www-form-urlencoded");let v=new URLSearchParams(O);if(i==="GET")for(let[m,_]of v)Q.append(m,_);else D?F.body=O:F.body=v}else throw s("FetchInvalidContentType",{action:w,contentType:c});N(Ae,e,{}),x.search=Q.toString();try{await pn(x.toString(),e,F)}catch(g){if(!It(g))throw s("FetchFailed",{method:i,url:a,error:g})}}finally{N(_e,e,{}),$()}};async function ln(e,t){let n=e.getReader(),s=await n.read();for(;!s.done;)t(s.value),s=await n.read()}function un(e){let t,n,s,i=!1;return function(r){t?t=dn(t,r):(t=r,n=0,s=-1);let o=t.length,c=0;for(;n<o;){i&&(t[n]===10&&(c=++n),i=!1);let l=-1;for(;n<o&&l===-1;++n)switch(t[n]){case 58:s===-1&&(s=n-c);break;case 13:i=!0;case 10:l=n;break}if(l===-1)break;e(t.subarray(c,l),s),c=n,s=-1}c===o?t=void 0:c&&(t=t.subarray(c),n-=c)}}function fn(e,t,n){let s=Vt(),i=new TextDecoder;return function(r,o){if(!r.length)n?.(s),s=Vt();else if(o>0){let c=i.decode(r.subarray(0,o)),l=o+(r[o+1]===32?2:1),u=i.decode(r.subarray(l));switch(c){case"data":s.data=s.data?`${s.data}
${u}`:u;break;case"event":s.event=u;break;case"id":e(s.id=u);break;case"retry":{let f=+u;Number.isNaN(f)||t(s.retry=f);break}}}}}var dn=(e,t)=>{let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},Vt=()=>({data:"",event:"",id:"",retry:void 0});function pn(e,t,{signal:n,headers:s,onopen:i,onmessage:a,onclose:r,onerror:o,openWhenHidden:c,fetch:l,retryInterval:u=1e3,retryScaler:f=2,retryMaxWaitMs:d=3e4,retryMaxCount:p=10,overrides:y,...h}){return new Promise((E,w)=>{let $={...s},C;function z(){C.abort(),document.hidden||D()}c||document.addEventListener("visibilitychange",z);let F=0;function x(){document.removeEventListener("visibilitychange",z),window.clearTimeout(F),C.abort()}n?.addEventListener("abort",()=>{x(),E()});let Q=l||window.fetch,g=i||(()=>{}),O=0,A=u;async function D(){C=new AbortController;try{let v=await Q(e,{...h,headers:$,signal:C.signal});O=0,u=A,await g(v);let m=async(b,I,le,V,...Fe)=>{let Z={[le]:await I.text()};for(let Y of Fe){let ue=I.headers.get(`datastar-${T(Y)}`);if(V){let X=V[Y];X&&(ue=typeof X=="string"?X:JSON.stringify(X))}ue&&(Z[Y]=ue)}N(b,t,Z),x(),E()},_=v.headers.get("Content-Type");if(_?.includes("text/html"))return await m(ee,v,"elements",y,"selector","mode","useViewTransition");if(_?.includes("application/json"))return await m(rt,v,"signals",y,"onlyIfMissing");if(_?.includes("text/javascript")){let b=document.createElement("script"),I=v.headers.get("datastar-script-attributes");if(I)for(let[le,V]of Object.entries(JSON.parse(I)))b.setAttribute(le,V);b.textContent=await v.text(),document.head.appendChild(b),x();return}await ln(v.body,un(fn(b=>{b?$["last-event-id"]=b:delete $["last-event-id"]},b=>{A=u=b},a))),r?.(),x(),E()}catch(v){if(!C.signal.aborted)try{let m=o?.(v)||u;window.clearTimeout(F),F=window.setTimeout(D,m),u=Math.min(u*f,d),++O>=p?(N(Lt,t,{}),x(),w("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${m}ms.`)}catch(m){x(),w(m)}}}D()})}var jt=Ce("get","GET");var qt=Ce("post","POST");var Jt={type:"watcher",name:ee,async onGlobalInit(e){Pt(ee,t=>{Ke&&t.useViewTransition?.trim()==="true"?document.startViewTransition(()=>Gt(e,t)):Gt(e,t)})}};function Gt(e,{elements:t="",selector:n,mode:s=it}){let{initErr:i}=e,a=t.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,""),r=/<\/html>/.test(a),o=/<\/head>/.test(a),c=/<\/body>/.test(a),l=new DOMParser().parseFromString(r||o||c?t:`<body><template>${t}</template></body>`,"text/html"),u=document.createDocumentFragment();if(r?u.appendChild(l.documentElement):o&&c?(u.appendChild(l.head),u.appendChild(l.body)):o?u.appendChild(l.head):c?u.appendChild(l.body):u=l.querySelector("template").content,!n&&(s===de||s===De))for(let f of u.children){let d;if(f instanceof HTMLHtmlElement)d=document.documentElement;else if(f instanceof HTMLBodyElement)d=document.body;else if(f instanceof HTMLHeadElement)d=document.head;else if(d=document.getElementById(f.id),!d){console.error(i("NoTargetsFound",{id:f.id}));continue}Kt(e,s,f,[d])}else{let f=document.querySelectorAll(n);if(!f.length){console.error(i("NoTargetsFound",{selector:n}));return}Kt(e,s,u,f)}}var Be=new WeakSet;for(let e of document.querySelectorAll("script"))Be.add(e);function Wt(e){let t=e instanceof HTMLScriptElement?[e]:e.querySelectorAll("script");for(let n of t)if(!Be.has(n)){let s=document.createElement("script");for(let{name:i,value:a}of n.attributes)s.setAttribute(i,a);s.text=n.text,n.replaceWith(s),Be.add(s)}}function Kt({initErr:e},t,n,s){for(let i of s){let a=n.cloneNode(!0);if(t===Xe)i.remove();else if(t===de||t===Ye)gn(i,a,t),Wt(i);else if(Wt(a),t===De)i.replaceWith(a);else if(t===et)i.prepend(a);else if(t===tt)i.append(a);else if(t===nt)i.before(a);else if(t===st)i.after(a);else throw e("InvalidPatchMode",{mode:t})}}var U=new Map,R=new Map,B=new Set,ce=new Set,J=document.createElement("div");J.hidden=!0;function gn(e,t,n){let s=W("ignore-morph");if(e.hasAttribute(s)&&t instanceof HTMLElement&&t.hasAttribute(s)||e.parentElement?.closest(`[${s}]`))return;let i=document.createElement("div");i.append(t),document.body.insertAdjacentElement("afterend",J);let a=e.querySelectorAll("[id]");for(let{id:o,tagName:c}of a)U.has(o)?ce.add(o):U.set(o,c);e.id&&(U.has(e.id)?ce.add(e.id):U.set(e.id,e.tagName)),B.clear();let r=i.querySelectorAll("[id]");for(let{id:o,tagName:c}of r)B.has(o)?ce.add(o):U.get(o)===c&&B.add(o);U.clear();for(let o of ce)B.delete(o);ce.clear(),R.clear(),Bt(n==="outer"?e.parentElement:e,a),Bt(i,r),zt(n==="outer"?e.parentElement:e,i,n==="outer"?e:null,e.nextSibling),J.remove()}function zt(e,t,n=null,s=null){e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content),n??=e.firstChild;for(let i of t.childNodes){if(n&&n!==s){let r=mn(i,n,s);if(r){if(r!==n){let o=n;for(;o&&o!==r;){let c=o;o=o.nextSibling,Je(c)}}Ue(r,i),n=r.nextSibling;continue}}let a=i.id;if(i instanceof Element&&B.has(a)){let r=window[a],o=r;for(;o=o.parentNode;){let c=R.get(o);c&&(c.delete(a),c.size||R.delete(o))}Qt(e,r,n),Ue(r,i),n=r.nextSibling;continue}if(R.has(i)){let r=document.createElement(i.tagName);e.insertBefore(r,n),Ue(r,i),n=r.nextSibling}else{let r=document.importNode(i,!0);e.insertBefore(r,n),n=r.nextSibling}}for(;n&&n!==s;){let i=n;n=n.nextSibling,Je(i)}}function mn(e,t,n){let s=null,i=e.nextSibling,a=0,r=0,o=R.get(e)?.size||0,c=t;for(;c&&c!==n;){if(Ut(c,e)){let l=!1,u=R.get(c),f=R.get(e);if(f&&u){for(let d of u)if(f.has(d)){l=!0;break}}if(l)return c;if(!s&&!R.has(c)){if(!o)return c;s=c}}if(r+=R.get(c)?.size||0,r>o||(s===null&&i&&Ut(c,i)&&(a++,i=i.nextSibling,a>=2&&(s=void 0)),c.contains(document.activeElement)))break;c=c.nextSibling}return s||null}function Ut(e,t){let n=e.id;return e.nodeType===t.nodeType&&e.tagName===t.tagName&&(!n||n===t.id)}function Je(e){R.has(e)?Qt(J,e,null):e.parentNode?.removeChild(e)}var Qt=Je.call.bind(J.moveBefore??J.insertBefore);function Ue(e,t){let n=t.nodeType;if(n===1){let s=W("ignore-morph");if(e.hasAttribute(s)&&t.hasAttribute(s))return e;if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&t.type!=="file")t.getAttribute("value")!==e.getAttribute("value")&&(e.value=t.getAttribute("value")??"");else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let r=t.value;r!==e.value&&(e.value=r),e.firstChild&&e.firstChild.nodeValue!==r&&(e.firstChild.nodeValue=r)}let i=(t.getAttribute(W("preserve-attr"))??"").split(" ");for(let{name:r,value:o}of t.attributes)e.getAttribute(r)!==o&&!i.includes(T(r))&&e.setAttribute(r,o);let a=e.attributes;for(let r=a.length-1;r>=0;r--){let{name:o}=a[r];!t.hasAttribute(o)&&!i.includes(T(o))&&e.removeAttribute(o)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),e.isEqualNode(t)||zt(e,t),e}function Bt(e,t){for(let n of t)if(B.has(n.id)){let s=n;for(;s&&s!==e;){let i=R.get(s);i||(i=new Set,R.set(s,i)),i.add(n.id),s=s.parentElement}}}qe(Ft,kt,Ht,Nt,jt,qt,Jt);Ge();export{Ge as apply,qe as load,wt as setAlias};
